<!-- eslint-disable @angular-eslint/template/interactive-supports-focus -->
<!-- eslint-disable @angular-eslint/template/click-events-have-key-events -->

<div>
  @for(node of nodes; track node.id){
    <div>

      <div [class.deleted]="node.is_deleted">

        @if(node.children){
          <span
          (click)="onToggle(node)">
          {{ expanded[node.id] ? '▲' : '▼' }}

          </span>
        }

        @else {
          <span class="spacer"></span>
        }

        {{ node.id }} - {{ node.title }}
      </div>


      @if(node.children && node.children.length > 0 && expanded[node.id]){
        <div class="child-nodes">
          <app-tree-node
          [nodes]="node.children"
          [expanded]="expanded"
          (toggle)="toggle.emit($event)">
          >
          </app-tree-node>
        </div>
      }
    </div>
  }
</div>
